{% extends "base.html" %}
{% load crispy_forms_tags  %}
{% block content %}

<div class= "container mt-5">
    <table class="table table-dark table-striped">
        <thead>
          <tr>
            <th scope="col">ID</th>
            <th scope="col">Musician Name</th>
            <th scope="col">Email</th>
            <th scope="col">Album Rating</th>
            <th scope="col">Instrument Type</th>
            <th scope="col">Album Name</th>
            <th scope="col">Release Date</th>
            <th scope="col">Actions</th>
          </tr>
        </thead>
        <tbody>
        {% for i in data %}
          <tr>
            <td>{{i.id}}</td>
            <td>
              {% if request.user.is_authenticated %}
                <a href="{% url 'edit_musician' i.id %}">{{i.musician.first_name }} {{ i.musician.last_name}} </a>
              {% else  %}
                {{i.musician.first_name }} {{ i.musician.last_name}}
              {% endif %}
            </td>
            <td>{{i.musician.email}}</td>
            <td>{{i.rating}}</td>
            <td>{{i.musician.instrument_type}}</td>
            <td>{{i.album_name}}</td>
            <td>{{i.release_date}}</td>
            <td>
              {% if request.user.is_authenticated %}
                <a href="{% url 'edit_album' i.id %}" class="btn btn-warning mt-1">Edit</a>
                <a href="{% url 'delete_musician' i.id %}" class="btn btn-danger mt-1">Delete</a>
                {% else  %}
                <button disabled="disabled" class="btn btn-warning mt-1">Edit</button>
                <button disabled="disabled" class="btn btn-danger mt-1">Delete</button>
                {% endif %}
            </td>
          </tr>
        {% endfor %}  
        </tbody>
      </table>
</div>

{% endblock %}